# ~!Cc68KX-l7Zo~fEc!vCMFV23B502BPJ8EJW7O2KAg1Tk2!cEf
# sh -c "git clone git://github.com/chuckorde/dotfiles.git && cd dotfiles && sh README"
# Add plugins: 
# git submodule add http://github.com/PLUG .vim/plugins/PLUG 
# git add .gitmodules .vim
#
# Manual:
# for i in $(ls -A); do mv $i ..; done
# cd ..
# rmdir dotfiles/
# git submodule init
# git submodule update

cwd=$(pwd)

function clean {
	cd ${cwd}/..
	rm -rf dotfiles/
	exit
}

function backup {
	cd ${cwd}
	backupdir=../dotbackup-$$
	mkdir ${backupdir}
	
	for i in $(ls -A)
	do
		[ -e ../${i} ] && cp -R ../${i} ${backupdir}
	done
}

function modules {
	cd ${cwd}/..
	git submodule init
	git submodule update
	# hack to remove stock snippets
	rm -rf .vim/plugins/snipmate/snippets 
}

function vim {
	cp -R .vim ..
	cp .vimrc ..
	modules
}

function all {
	for i in $(ls -A); do rm -rf ../${i} ; mv ${i} ..; done
	modules
}

while :
do
	echo "1) Copy whole environment"
	echo "2) Copy whole environment, with backup"
	echo "3) Copy vim environment"
	echo "4) Copy vim environment, with backup"
	echo "q) quit this script"
	read -p "> " IN
	case ${IN} in
		1) all && clean
			;;
		2) backup ; all && clean
			;;
		3) vim && clean
			;;
		4) backup ; vim && clean
			;;
		[Qq]) break
			;;
		*) echo "* select 1-4 or q"
			;;
	esac
done

